<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Get It Done</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr"
      crossorigin="anonymous"
    />
  </head>
  <body class="bg-light">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm px-3">
      <div class="container-fluid">
        <a class="navbar-brand text-primary fs-2 fw-bold" href="#">TaskFlow</a>

        <!-- Mobile Toggle Button -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarContent"
          aria-controls="navbarContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Navbar Items -->
        <div class="collapse navbar-collapse" id="navbarContent">
          <div class="d-flex align-items-center ms-auto mt-2 mt-lg-0">
            <h5
              class="mb-0 me-3 text-primary bg-info p-2"
              style="border-radius: 5px"
            >
              Welcome {{ user.username }}
            </h5>
            <a
              href="{% url 'task_create' %}"
              class="me-3 btn btn-warning text-white fw-semibold"
              >Add Task</a
            >
            <a
              href="{% url 'logout_view' %}"
              class="btn btn-primary text-white fw-semibold"
            >
              Sign Out
            </a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
      <h1 class="text-primary fw-bold mb-4">Do It Now</h1>

      {% if tasks %}
      <div class="table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead class="table-primary">
            <tr>
              <th>Title</th>
              <th>Status</th>
              <th>Due Date</th>
              <th>Priority</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for task in tasks %}
            <tr>
              <td>{{ task.title }}</td>
              <td>
                {% if task.status == "completed" %}
                <span class="badge bg-success">Completed</span>
                {% else %}
                <span class="badge bg-warning text-dark">Pending</span>
                {% endif %}
              </td>
              <td>{{ task.due_date }}</td>
              <td>
                {% if task.priority %}
                <span class="badge bg-danger">High</span>
                {% else %}
                <span class="badge bg-secondary">Normal</span>
                {% endif %}
              </td>
              <td>
                <a
                  href="{% url 'task_edit' task.id %}"
                  class="btn btn-sm btn-primary"
                  >Edit</a
                >
                <a
                  href="{% url 'task_delete' task.id %}"
                  class="btn btn-sm btn-danger"
                  >Delete</a
                >
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <p class="text-muted">
        No tasks available. <a href="{% url 'task_create' %}">Add one now</a>.
      </p>
      {% endif %}
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
